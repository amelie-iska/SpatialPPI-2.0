Bootstrap: docker
From: pytorch/pytorch:2.2.1-cuda11.8-cudnn8-devel

%post
    # Core Dependencies
    pip install --upgrade pip
    pip install torch_geometric==2.5.1
    pip install pyg_lib torch_scatter torch_sparse torch_cluster torch_spline_conv -f https://data.pyg.org/whl/torch-2.2.0+cu118.html
    conda install lightning -c conda-forge
    pip install lightning[extra]
    
    # Functional Dependencies
    pip install vthread==0.1.5
    pip install matplotlib==3.8.3
    pip install biopandas==0.4.1
    pip install transformers==4.40.2
    pip install sentencepiece==0.2.0
    pip install torchsummary==1.5.1
    pip install tensorboard
    pip install biopython

    # The following are optional packages
    # Can be removed when problems arise
    # They are only used for training and dataset generation and do not affect inference.
    pip install torch_cluster -f https://data.pyg.org/whl/torch-2.2.0+cu118.html --no-cache-dir
    pip install git+https://github.com/yusuf1759/prodigy-cryst.git
    pip install pinder[all]
    pip install atom3d==0.2.6
